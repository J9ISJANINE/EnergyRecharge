<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EnergyRecharge</title>
  <link rel="manifest" href="manifest.json" />

  <!-- åƒç´ å­—ä½“ -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap " rel="stylesheet">

  <style>
    /* å…¨å±€æ ·å¼ */
    body {
      margin: 0;
      padding: 0;
      background: black;
      color: #7CFC00;
      font-family: 'Press Start 2P', monospace;
      overflow-x: auto;
      white-space: nowrap;
      font-size: 14px;
      line-height: 1.6;
    }

    /* ä¸»é¢˜åˆ‡æ¢æ ·å¼ */
    body.win95 {
      background: #333;
      color: white;
      font-family: Arial, sans-serif;
    }

    body.hacker {
      background: black;
      color: #00FF00;
      font-family: 'Press Start 2P', monospace;
    }

    body.crt {
      background: black;
      color: #00FF00;
      font-family: 'Press Start 2P', monospace;
      animation: crtScanline 1s linear infinite;
    }

    @keyframes crtScanline {
      0% { background-position: 0px 0px; }
      100% { background-position: 0px -100%; }
    }

    /* æ¨ªå‘å®¹å™¨ */
    .window {
      display: inline-block;
      width: 1200px;
      min-height: 100vh;
      padding: 40px 20px;
      border-left: 2px solid #7CFC00;
      border-right: 2px solid #7CFC00;
      background-color: #000;
    }

    h1 {
      font-size: 16px;
      color: #FFD700;
      text-shadow: 1px 1px black;
      margin-bottom: 20px;
    }

    button {
      background: linear-gradient(45deg, #2d2d2d, #3d3d3d);
      border: 3px solid #7CFC00;
      padding: 10px 20px;
      font-size: 12px;
      color: #7CFC00;
      cursor: pointer;
      transition: all 0.1s;
      box-shadow: 4px 4px 0 #000;
      margin: 10px 5px;
    }

    button:hover {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0 #000;
      background: linear-gradient(45deg, #3d3d3d, #4d4d4d);
    }

    #output, #today-line {
      margin-top: 20px;
      padding: 15px;
      width: 80%;
      border: 3px dashed #7CFC00;
      background: rgba(0, 0, 0, 0.6);
    }

    #completed-list {
      margin-top: 20px;
      padding: 15px;
      width: 80%;
      border: 2px dotted #00FFFF;
      background: rgba(0, 0, 0, 0.6);
    }

    .footer {
      font-size: 8px;
      color: #555;
      margin-top: 40px;
    }

    /* æ¨ªå‘æ»šåŠ¨èƒŒæ™¯æ•ˆæœ */
    body {
      background-image:
        linear-gradient(rgba(124, 252, 0, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(124, 252, 0, 0.05) 1px, transparent 1px);
      background-size: 4px 4px;
    }

    /* Kitty æ¨ªå‘ç§»åŠ¨åŠ¨ç”» */
    .janine-icon {
      width: 128px;
      image-rendering: pixelated;
      animation: scrollKitty 8s linear infinite;
    }

    @keyframes scrollKitty {
      0% { transform: translateX(0); }
      100% { transform: translateX(100vw); }
    }

    /* å“åº”å¼è®¾ç½® */
    @media (max-width: 640px) {
      .window {
        width: 100%;
        font-size: 12px;
      }

      .janine-icon {
        width: 64px;
      }

      button {
        font-size: 10px;
      }
    }

    /* æ ‡ç­¾ç­›é€‰æ  */
    .tags {
      margin-top: 10px;
    }

    .tag-btn {
      font-size: 10px;
      margin: 5px;
    }

    /* ä¸»é¢˜åˆ‡æ¢æŒ‰é’® */
    .theme-switcher {
      margin-bottom: 20px;
    }

    .theme-switcher button {
      background: #2d2d2d;
      border: 2px solid #7CFC00;
      padding: 10px 20px;
      font-size: 12px;
      color: #7CFC00;
      cursor: pointer;
      transition: all 0.1s;
      box-shadow: 4px 4px 0 #000;
      margin: 5px;
    }

    .theme-switcher button:hover {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0 #000;
      background: #3d3d3d;
    }
  </style>
</head>

<body>

  <!-- ä¸»ä½“çª—å£ -->
  <div class="window">

    <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
    <div class="theme-switcher">
      <button onclick="setTheme('default')">é»˜è®¤</button>
      <button onclick="setTheme('win95')">Windows 95</button>
      <button onclick="setTheme('hacker')">é»‘å®¢å‘½ä»¤è¡Œ</button>
      <button onclick="setTheme('crt')">CRT å±å¹•</button>
    </div>

    <!-- æ¨ªå‘æ»šåŠ¨çš„å›¾æ ‡ -->
    <div style="position: relative; height: 100px;">
      <img src="janine-icon.png" alt="J9ISJANINE" class="janine-icon" />
    </div>

    <!-- DOS æ¬¢è¿è¯­ -->
    <div style="margin-bottom: 10px;">$ J9ISJANINE ENERGY STATION LOADED</div>

    <!-- æ ‡é¢˜ -->
    <h1>ğŸ§ƒ ç‚¹æˆ‘è·å–ä¸€æ¡æ¢å¤èƒ½é‡çš„å°ä»»åŠ¡ï¼ˆåªèƒ½éšæœº1æ¡å–”ï¼‰</h1>

    <!-- æ¥ä¸€æ¡æŒ‰é’® -->
    <button onclick="generateTask()">ğŸ” æ¥ä¸€æ¡ï¼</button>
    <button onclick="generateShortTasks()">â° æˆ‘åªæœ‰10åˆ†é’Ÿ</button>

    <!-- è¾“å‡ºåŒºåŸŸ -->
    <div id="output">â–ˆâ–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–ˆ</div>

    <!-- ä»Šæ—¥èƒ½é‡è¯­å¥ -->
    <h1>âœ¨ ä»Šæ—¥èƒ½é‡è¯­å¥ âœ¨</h1>
    <div id="today-line"></div>

    <!-- å·²å®Œæˆä»»åŠ¡ -->
    <h1>âœ… å·²å®Œæˆçš„ä»»åŠ¡</h1>
    <div id="completed-list">æš‚æ— è®°å½•</div>

    <!-- åº•éƒ¨ç‰ˆæƒä¿¡æ¯ -->
    <div class="footer">Â© EnergyRecharge by J9ISJANINE Â· v1.0</div>
  </div>

  <script>
    const tasks = [
      { text: "éšä¾¿ç¿»ä¸€æœ¬æ²¡çœ‹è¿‡çš„ä¹¦ï¼Œä»ä¸­é—´è¯»ä¸€é¡µ ğŸ“–", tags: ['é˜…è¯»', 'é™å¿ƒ'] },
      { text: "æ‰¾ä¸€æ®µé™Œç”Ÿè¯­ç§çš„è¯—æ­Œæœ—è¯»ï¼Œä¸æŸ¥æ„æ€ ğŸ§", tags: ['è¯­è¨€', 'å†¥æƒ³'] },
      { text: "æ‰“å¼€åœ°å›¾ç‚¹ä¸ªåœ°æ–¹ï¼Œçœ‹çœ‹é‚£æ˜¯å“ªå„¿ ğŸ—ºï¸", tags: ['æ¢ç´¢', 'æ­¥è¡Œ'] },
      { text: "æŠ“ä¸€æŠŠç±³ä¸‹æ¥¼æ’’åœ¨å°é¸Ÿå£°éŸ³æœ€å¤šçš„åŒºåŸŸå¹¶è¯´ ğŸµå°é¸Ÿå°é¸Ÿå¿«æ¥åƒï¼", tags: ['æˆ·å¤–', 'è‡ªç„¶'] },
      { text: "ç”»ä¸€å¼ çº¿æ¡å›¾ï¼Œåƒåœ¨åšæ¢¦ ğŸŒ€", tags: ['ç”»ç”»', 'æ”¾æ¾'] },
      { text: "åˆ—å‡º5ä¸ª æˆ‘å¾ˆä¼˜ç§€ çš„ç†ç”±ï¼ˆæ‹‰å±å¾ˆå¿«å½“ç„¶ä¹Ÿç®—å•Šï¼ğŸŒšï¼‰", tags: ['è‡ªä¿¡', 'å¹½é»˜'] },
      { text: "å»å‘¨è¾¹ä¸€ä¸ªæ²¡å»è¿‡çš„åœ°æ–¹æ‹å¼ ç…§ğŸ¢", tags: ['æ‘„å½±', 'æ¢ç´¢'] },
      { text: "æ–­èˆç¦»4ä»¶3ä¸ªæœˆæ²¡ç”¨è¿‡çš„ä¸œè¥¿â˜•", tags: ['æ•´ç†', 'è½»æ¾'] },
      { text: "ä¹°ä¸€ç›†å°æ¤ç‰©ğŸŒ±", tags: ['å…»æ¤', 'æ²»æ„ˆ'] },
      { text: "è¯•è¯•å†™ä¸€é¦–è¯—ğŸ’ª", tags: ['åˆ›ä½œ', 'è¡¨è¾¾'] },
      { text: "åš2ä¸ªä»°å§èµ·åï¼Œæ²¡é”™å„¿å°±2ä¸ªï¼ğŸ«³", tags: ['è¿åŠ¨', 'å¯åŠ¨'] },
      { text: "å¯¹ç€æ°´æ¯è¯´â€œæˆ‘å…è®¸ä½ è‡ªç”±æµåŠ¨â€ä¸‰æ¬¡ ğŸ’§", tags: ['ä»ªå¼æ„Ÿ', 'é‡Šæ”¾'] },
      { text: "é€‰ä¸€ç§é¢œè‰²ï¼Œåªç”¨é‚£ç§é¢œè‰²ç”»5åˆ†é’Ÿ ğŸ¨", tags: ['è‰ºæœ¯', 'ä¸“æ³¨'] },
      { text: "æ¨¡ä»¿ä½ å°æ—¶å€™å“­çš„å£°éŸ³ ğŸ˜­", tags: ['æƒ…ç»ªé‡Šæ”¾', 'æç¬‘'] },
      { text: "ç»™ä¸€ä¸ªè€æœ‹å‹å‘ä¸ªæ¶ˆæ¯ğŸ˜„", tags: ['ç¤¾äº¤', 'è¿æ¥'] }
    ];

    // ä»Šæ—¥èƒ½é‡è¯­å¥ï¼ˆæŒ‰æ—¥æœŸå˜åŒ–ï¼‰
    function getTodayLine() {
      const lines = [
        { en: "Today's Motto: Small steps still move mountains.", zh: "ä»Šæ—¥èƒ½é‡è¯­å¥ï¼šå¾®å°æ­¥ä¼ä¹Ÿèƒ½ç¿»å±±è¶Šæµ·ã€‚" },
        { en: "Your energy is your most valuable resource.", zh: "ä»Šæ—¥èƒ½é‡è¯­å¥ï¼šä½ çš„èƒ½é‡æ˜¯ä½ æœ€å®è´µçš„èµ„æºã€‚" },
        { en: "You don't need to be perfect, just present.", zh: "ä»Šæ—¥èƒ½é‡è¯­å¥ï¼šä½ ä¸å¿…å®Œç¾ï¼Œåªéœ€åœ¨åœºã€‚" },Â  
        { en: "Choice makes you responsible, not powerful.", zh: "ä»Šæ—¥èƒ½é‡è¯­å¥ï¼šé€‰æ‹©è®©ä½ å˜å¾—æœ‰è´£ä»»ï¼Œè€Œä¸æ˜¯å¼ºå¤§ã€‚" },
        { en: "What you do now echoes in eternity.", zh: "ä»Šæ—¥èƒ½é‡è¯­å¥ï¼šä½ ç°åœ¨çš„è¡Œä¸ºå°†åœ¨æ°¸æ’ä¸­å›å“ã€‚" }
      ];
      const today = new Date().getDay();
      return lines[today % lines.length];
    }

    const todayLine = getTodayLine();
    document.getElementById("today-line").innerHTML = `${todayLine.zh}<br>${todayLine.en}`;

    // æ¯æ—¥ä»»åŠ¡æ¬¡æ•°é™åˆ¶é€»è¾‘
    const MAX_TRIES = 3;

    function getTodayKey() {
      const today = new Date().toISOString().split('T')[0];
      return `taskCount-${today}`;
    }

    function getTryCount() {
      return parseInt(localStorage.getItem(getTodayKey()) || "0");
    }

    function increaseTryCount() {
      const key = getTodayKey();
      localStorage.setItem(key, getTryCount() + 1);
    }

    function updateTryCounter() {
      document.querySelector(".try-counter").textContent = `${MAX_TRIES - getTryCount()} æ¬¡å‰©ä½™`;
    }

    function generateTask(filterTag = null) {
      if (getTryCount() >= MAX_TRIES) {
        alert("ä»Šå¤©åªèƒ½æŠ½3æ¬¡å•¦ï½æ˜å¤©å†æ¥å§ï¼");
        return;
      }

      let validTasks = tasks;
      if (filterTag) {
        validTasks = tasks.filter(t => t.tags.includes(filterTag));
      }

      const randomIndex = Math.floor(Math.random() * validTasks.length);
      const selectedTask = validTasks[randomIndex].text;
      document.getElementById("output").innerHTML = `âœ¨ ${selectedTask} âœ¨<br>â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„`;

      increaseTryCount();
      updateTryCounter();
      saveToCompleted(selectedTask);
    }

    // ç”ŸæˆçŸ­ä»»åŠ¡ï¼ˆå¸¦ tag ç­›é€‰ï¼‰
    function generateShortTasks() {
      generateTask("10åˆ†é’Ÿ");
    }

    // å·²å®Œæˆä»»åŠ¡è®°å½•
    function saveToCompleted(taskText) {
      const completed = JSON.parse(localStorage.getItem("completed-tasks") || "[]");
      completed.push(taskText);
      localStorage.setItem("completed-tasks", JSON.stringify(completed));
      renderCompleted();
    }

    function renderCompleted() {
      const completed = JSON.parse(localStorage.getItem("completed-tasks") || "[]");
      const list = completed.map(task => `âœ”ï¸ ${task}`).join("<br>");
      document.getElementById("completed-list").innerHTML = list || "æš‚æ— è®°å½•";
    }

    // åˆå§‹åŒ–é¡µé¢
    window.onload = () => {
      renderCompleted();
      updateTryCounter();Â  
    };

    // ä¸»é¢˜åˆ‡æ¢é€»è¾‘
    function setTheme(theme) {
      // ç§»é™¤æ‰€æœ‰ä¸»é¢˜ç±»
      document.body.classList.remove('win95', 'hacker', 'crt');

      // æ·»åŠ æ–°ä¸»é¢˜ç±»
      if (theme === 'win95') {
        document.body.classList.add('win95');
      } else if (theme === 'hacker') {
        document.body.classList.add('hacker');
      } else if (theme === 'crt') {
        document.body.classList.add('crt');
      }
    }
  </script>

</body>
</html>
